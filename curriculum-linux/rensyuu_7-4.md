# 7.4.1 練習：gzipコマンドによる圧縮・解凍の操作

## 🔄 実習内容

### 1. student ユーザに切り替え、ホームディレクトリであることを確認する

```bash
$ su - student
$ pwd
# 結果が /home/student などになっていればOK
```

---

### 2. `/etc/services` ファイルを gzip でホームディレクトリにコピー＆圧縮する  
※元の `/etc/services` はそのまま残す

```bash
$ cp /etc/services ~/
$ gzip ~/services
# services.gz という圧縮ファイルが作成される
```

---

### 3. 圧縮前と圧縮後のファイルサイズを比較する

```bash
# 圧縮前のサイズ（コピー後の元ファイルを使うならこの手順は先に行う）
$ ls -l ~/services

# 圧縮後のサイズ
$ ls -l ~/services.gz
```

📝 `gzip` はテキストファイルのような内容に対して高い圧縮率を発揮します。

---

### 4. 圧縮ファイルを解凍し、元ファイルを復元する（圧縮ファイルは削除される）

```bash
$ gunzip ~/services.gz
# services.gz が削除され、services が復元される
```

---

## ✅ 補足知識

| コマンド        | 説明                                       |
|----------------|--------------------------------------------|
| `gzip`         | ファイルを `.gz` 形式に圧縮する            |
| `gunzip`       | `.gz` ファイルを元に戻す（解凍）           |
| `ls -l`        | ファイルサイズや更新日時を確認する         |
| `cp`           | ファイルをコピー（元ファイルを残す目的）   |

---

## 📌 ポイント

- `gzip` は元ファイルを削除して `.gz` に置き換えるため、**`cp` でコピーを取ってから使う**のが安全
- 解凍時に `.gz` ファイルは自動で削除される
- `ls -l` でサイズを見比べることで、圧縮効果を確認できる

---

# 7.4.3 練習：`tar` コマンドによるログファイルの圧縮と解凍

## 📁 概要

この練習では、`tar` コマンドを用いて `/var/log/dnf*` に一致するログファイルをまとめて圧縮し、後からそのファイルを確認・解凍します。

---

## 🔧 実行手順とコマンド

### 1. 保存先ディレクトリに移動

```bash
$ cd ~/archives/
```

📌 `~/archives/` はログアーカイブを保存するディレクトリです。

---

### 2. `/var/log/` 配下の dnf 関連ファイルを `tar.gz` 形式で圧縮

```bash
$ tar czvf dnf_log.tar.gz /var/log/dnf*
```

| オプション | 意味                       |
|------------|----------------------------|
| `c`        | 新しいアーカイブを作成     |
| `z`        | gzipで圧縮                 |
| `v`        | 詳細表示（処理中のファイル）|
| `f`        | ファイル名の指定           |

📝 結果として `dnf_log.tar.gz` という圧縮ファイルが作成されます。

---

### 3. アーカイブされたファイルの確認

```bash
$ ls -l ~/archives/
```

📌 `dnf_log.tar.gz` のサイズや更新時刻などを確認できます。

---

### 4. 作成したアーカイブを解凍する

```bash
$ tar xzvf dnf_log.tar.gz
```

| オプション | 意味                         |
|------------|------------------------------|
| `x`        | アーカイブの展開（解凍）     |
| `z`        | gzip形式を展開               |
| `v`        | 展開中のファイルを表示       |
| `f`        | 解凍対象のファイル名         |

📝 `~/archives/` に `/var/log/dnf*` の内容が展開されます。

---

## ✅ 補足

- `tar.gz` は「複数のファイルをまとめて圧縮する」際によく使われる形式です。
- `/var/log/dnf*` は dnf コマンド（パッケージ管理）関連のログです。
- 解凍後に `/var/log/dnf.log` や `dnf.librepo.log` などが展開されていることを確認しましょう。

---

## 💡 応用ポイント

- `.tar.gz` は `.tgz` という拡張子でも同じです。
- `tar` コマンドはアーカイブと圧縮を一度に行えるので、**バックアップやログ保存**に便利です。

---
