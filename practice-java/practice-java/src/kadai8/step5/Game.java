/**
 * Step5ï¼šGameã‚¯ãƒ©ã‚¹ã®mainãƒ¡ã‚½ãƒƒãƒ‰ã«ã¦ã€å‹‡è€…ã¾ãŸã¯æ•µï¼ˆã‚¾ãƒ³ãƒ“ï¼‰ã®ç”Ÿå‘½åŠ›ï¼ˆHPï¼‰ãŒ0ã«ãªã‚‹ã¾ã§ã€
 * whileæ–‡ã‚’åˆ©ç”¨ã—ã¦æˆ¦ã„ç¶šã‘ã‚‹ã‚ˆã†ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä¿®æ­£ã—ãªã•ã„ã€‚
 * å‹‡è€…ãŒè² ã‘ãŸå ´åˆã¯ã€Œã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã€ã¨ãªã‚Šã€å‡¦ç†ã‚’çµ‚äº†ã—ã¾ã™ã€‚
 */

package kadai8.step5;

// ã‚²ãƒ¼ãƒ ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
public class Game {
	public static void main(String[] args) {
		System.out.println("â˜…â˜…â˜…ã‚²ãƒ¼ãƒ é–‹å§‹â˜…â˜…â˜…");

		// ğŸ¦¸å‹‡è€…ï¼ˆç”Ÿå‘½åŠ›ï¼š50ã€æ”»æ’ƒåŠ›ï¼š10ï¼‰
		Actor hero = new Hero(50, 10);

		// å‹‡è€…ã®æƒ…å ±ã®è¡¨ç¤º
		System.out.println(hero);

		// ä»•åˆ‡ã‚Šè¡¨ç¤º
		partition();

		// ğŸ§Ÿã‚¾ãƒ³ãƒ“ï¼ˆç”Ÿå‘½åŠ›ï¼š15ã€æ”»æ’ƒåŠ›ï¼š5ï¼‰
		Actor enemy = new Zombie(15, 5);

		// ã‚¾ãƒ³ãƒ“ã®æƒ…å ±ã®è¡¨ç¤º
		System.out.println(enemy + "ãŒã‚ã‚‰ã‚ã‚ŒãŸï¼");

		// ä»•åˆ‡ã‚Šè¡¨ç¤º
		partition();

		// whileæ–‡ã§æˆ¦é—˜ã‚’è¡Œã†
		// å‹‡è€…ã¨æ•µã®HPãŒ0ã«ãªã‚‹ã¾ã§æˆ¦ã„ç¶šã‘ã‚‹
		// ãƒ«ãƒ¼ãƒ—ã‚’æŠœã‘ã‚‹æ¡ä»¶ã¯ifæ–‡ã§æŒ‡å®šã™ã‚‹
		while (true) {

			// å‹‡è€…ã‹ã‚‰æ•µã¸ã®æ”»æ’ƒ
			// attackãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—å¼•æ•°ã«æ•µã‚’æŒ‡å®šã™ã‚‹
			hero.attack(enemy);

			// æ•µã®æƒ…å ±ã‚’è¡¨ç¤º
			System.out.println(" " + enemy);

			// ä»•åˆ‡ã‚Šè¡¨ç¤º
			partition();

			// æ•µã®HPãŒ0ã«ãªã£ãŸã¨ãwhileã‹ã‚‰æŠœã‘ã‚‹
			if (enemy.getHp() == 0) {
				System.out.println(enemy.getName() + "ã‚’å€’ã—ãŸï¼ğŸ˜„");
				partition();
				partition();

				break;
			}

			// æ•µã‹ã‚‰å‹‡è€…ã¸ã®æ”»æ’ƒ
			// attackãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—å¼•æ•°ã«å‹‡è€…ã‚’æŒ‡å®šã™ã‚‹
			enemy.attack(hero);

			// å‹‡è€…ã®æƒ…å ±ã‚’è¡¨ç¤º
			System.out.println(" " + hero);

			partition();

			// å‹‡è€…ã®HPãŒ0ã«ãªã£ãŸã¨ãwhileã‹ã‚‰æŠœã‘ã‚‹
			// ã‚¾ãƒ³ãƒ“ã®æ”»æ’ƒåŠ›ã‚’å‹‡è€…ã®HPã‹ã‚‰å¼•ã
			if (hero.getHp() == 0) {

				// å‹‡è€…ã®HPãŒ0ã«ãªã£ãŸã¨ã
				System.out.println(hero.getName() + "ã¯ã‚„ã‚‰ã‚Œã¦ã—ã¾ã£ãŸ...ğŸ˜‚");
				partition();
				partition();
				System.out.println("â˜…â˜…â˜…ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼â˜…â˜…â˜…");
				return;
			}
		}

		System.out.println("â˜…â˜…â˜…ã‚²ãƒ¼ãƒ çµ‚äº†â˜…â˜…â˜…");
	}

	// ä»•åˆ‡ã‚Šè¡¨ç¤ºï¼ˆ1ç§’ã‚¹ãƒˆãƒƒãƒ—ã™ã‚‹ï¼‰
	private static void partition() {

		// try-catchæ–‡ã§ä¾‹å¤–å‡¦ç†ã‚’è¡Œã†
		// ä¾‹å¤–å‡¦ç†ã‚’è¡Œã†ã“ã¨ã§ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå¼·åˆ¶çµ‚äº†ã™ã‚‹ã®ã‚’é˜²ã
		try {

			// thread.sleepãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦1ç§’ã‚¹ãƒˆãƒƒãƒ—ã™ã‚‹
			// å¼•æ•°ã«ãƒŸãƒªç§’ã‚’æŒ‡å®šã™ã‚‹
			// 1000ãƒŸãƒªç§’ = 1ç§’
			Thread.sleep(1000);

		// InterruptedExceptionã¯ã‚¹ãƒ¬ãƒƒãƒ‰ãŒå‰²ã‚Šè¾¼ã¾ã‚ŒãŸã¨ãã«ç™ºç”Ÿã™ã‚‹ä¾‹å¤–
		} catch (InterruptedException e) {

			System.out.println("å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ");

			// e.printStackTrace()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã“ã¨ã§ã€ã‚¨ãƒ©ãƒ¼ã®è©³ç´°ã‚’è¡¨ç¤ºã™ã‚‹
			e.printStackTrace();
		}
		System.out.println("---------");
	}
}